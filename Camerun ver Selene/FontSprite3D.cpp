//*============================================================================
//FontSprite3D.cpp
//*============================================================================

//=============================================================================
//include
//=============================================================================
#include "FontSprite3D.h"

//============================================================================
//コンストラクタ
//============================================================================
//[input]
//	name:データ名
//===========================================================================
CFontSprite3D::CFontSprite3D( string name ) :m_pFontSpr(NULL)
{
	m_DataName = name;
	
	m_Str = "あああああ";
	
	m_vPos.Set(0, 0, 0);
}

//============================================================================
//コンストラクタ
//============================================================================
//[input]
//	name:データ名
//===========================================================================
CFontSprite3D::CFontSprite3D( string name, Math::Vector3D vPos ) :m_pFontSpr(NULL)
{
	m_DataName = name;
	
	m_Str = "あああああ";
	
	for( int i = 0;i < S_MAX;++i )
	{
		m_pActorSprite[i] = NULL;
	}
	
	m_vPos = vPos;
}


//============================================================================
//デストラクタ
//============================================================================
CFontSprite3D::~CFontSprite3D(void)
{
	for( int i = 0;i < S_MAX;++i )
	{	
		SAFE_RELEASE( m_pActorSprite[i] );
	}
	
	SAFE_RELEASE( m_pFontSpr );
}

//============================================================================
//ファイル読み込み
//============================================================================
//[input]
//	pRender:レンダラー用デバイス
//===========================================================================
void CFontSprite3D::Load( Renderer::IRender *pRender )
{
	m_pFontSpr = pRender->CreateFontSprite3DFromFile( m_DataName.c_str(), "tga", 1024 );
}

//============================================================================
//ファイル読み込み
//============================================================================
//[input]
//	pRender:レンダラー用デバイス
//===========================================================================
void CFontSprite3D::CreateActor( int index, Scene::ISceneManager *pSceneMgr )
{
	//m_pActorSprite[index] = pSceneMgr->CreateActor( m_pFontSpr );
}



//============================================================================
//処理
//============================================================================
void CFontSprite3D::Exec()
{
	if( m_pFontSpr != NULL )
	{
		/*描画開始*/
		m_pFontSpr->Begin();
		
		/*描画キューに追加*/
		m_pFontSpr->DrawString( m_Str.c_str(), m_vPos, Math::Point2DF( 120, 120 ), CColor(255, 255, 255) );
		
		/*描画終了*/
		m_pFontSpr->End();
	}	
}

//============================================================================
//レンダリング
//============================================================================
void CFontSprite3D::Rendering()
{
	for( int i = 0;i < S_MAX;++i )
	{	
		m_pActorSprite[i]->RenderingRequest();
	}
}

//============================================================================
//表示する文字の設定
//============================================================================
//[input]
//	str:設定する文字列
//===========================================================================
void CFontSprite3D::SetDrawString(std::string str)
{
	m_Str = str;
}



